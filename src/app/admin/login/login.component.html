<div class="card login__form">
  <form (ngSubmit)="submit()" [formGroup]="form">
    <h1 class="header-lg login__header">Login</h1>
    <div
      class="form-block"
      [ngClass]="{
        invalid: form.get('username')?.touched && form.get('username')?.invalid
      }"
    >
      <label for="username" class="form-block__label">Email</label>
      <input
        type="username"
        name="username"
        id="username"
        class="form-block__input"
        formControlName="username"
        placeholder="Enter Email Address"
      />
      <div
        *ngIf="form.get('username')?.touched && form.get('username')?.invalid"
        class="form-block__validation"
      >
        <p
          *ngIf="form.get('username')?.errors?.['required']"
          class="form-block__error"
        >
          This field is required
        </p>
        <p
          *ngIf="form.get('username')?.errors?.['username']"
          class="form-block__error"
        >
          Incorrect email format
        </p>
      </div>
    </div>
    <div
      class="form-block"
      [ngClass]="{
        invalid: form.get('password')?.touched && form.get('password')?.invalid
      }"
    >
      <label for="password" class="form-block__label">Password</label>
      <input
        type="password"
        name="password"
        id="password"
        class="form-block__input"
        formControlName="password"
        placeholder="Enter Password"
      />
      <div
        class="form-block__validation"
        *ngIf="form.get('password')?.touched && form.get('password')?.invalid"
      >
        <p
          class="form-block__error"
          *ngIf="form.get('password')?.errors?.['required']"
        >
          This field is required
        </p>
        <p
          class="form-block__error"
          *ngIf="form.get('password')?.errors?.['minlength']"
        >
          Please enter at least 6 characters
        </p>
      </div>
    </div>
    <div
      class="form-block__error login__error"
      *ngIf="authService.errorStream$ | async as error"
    >
      {{ error }}
    </div>
    <div>
      <button
        type="submit"
        class="btn btn-black login__submit"
        [disabled]="form.invalid"
      >
        LOGIN
      </button>
    </div>
  </form>
</div>
